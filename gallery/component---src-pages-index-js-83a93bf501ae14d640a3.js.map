{"version":3,"sources":["webpack:///./node_modules/gatsby-plugin-google-analytics/index.js","webpack:///./src/components/filterListItem.js","webpack:///./src/components/filterList.js","webpack:///./src/components/customElementCardListItem.js","webpack:///./src/components/customElementCardList.js","webpack:///./src/pages/index.js","webpack:///./src/helpers/useDebounce.js"],"names":["_interopRequireDefault","require","exports","__esModule","OutboundLink","trackCustomEvent","_ref","category","action","label","value","_ref$nonInteraction","nonInteraction","transport","hitCallback","_ref$callbackTimeout","callbackTimeout","window","ga","trackingEventOptions","eventCategory","eventAction","eventLabel","eventValue","callback","opt_timeout","called","raceCallback","setTimeout","createFunctionWithTimeout","_extends2","_objectWithoutPropertiesLoose2","_react","_propTypes","props","rest","default","createElement","onClick","e","redirect","button","altKey","ctrlKey","metaKey","shiftKey","defaultPrevented","target","toLowerCase","href","document","location","propTypes","string","number","func","FilterListItem","id","onToggleCategory","htmlFor","className","title","checked","selected","name","type","onChange","FilterList","categories","onChangeSearchText","useState","searchText","setSearchText","style","display","length","required","maxLength","map","i","key","c","CustomElementCardListItem","customElement","readmeUrl","rel","padding","height","src","thumbnailUrl","publicURL","alt","description","margin","CustomElementCardList","customElements","cleanText","text","replace","textHasMatch","searchTextCleanStartsWith","searchTextCleanIncludes","textCleaned","startsWith","includes","IndexPage","data","initialCategories","sort","a","b","localeCompare","getInitialCategories","distinct","setCategories","allElements","elements","edges","node","filteredElements","setFilteredElements","activeFilter","setActiveFilter","useEffect","activeCategories","filter","visibleElements","element","matchesCategoryFilter","some","satisfiesCategoryFilters","matchesSearchTextFilter","titleHasMatch","descriptionHasMatch","categoriesHasMatch","join","satisfiesSearchTextFilter","cleanedText","categoriesFlattened","debouncedActiveFilter","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","useDebounce","index","findIndex","stateCategory","newCategories","t"],"mappings":"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","file":"component---src-pages-index-js-83a93bf501ae14d640a3.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.OutboundLink = OutboundLink;\nexports.trackCustomEvent = trackCustomEvent;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar createFunctionWithTimeout = function createFunctionWithTimeout(callback, opt_timeout) {\n  if (opt_timeout === void 0) {\n    opt_timeout = 1000;\n  }\n\n  var called = false;\n\n  var raceCallback = function raceCallback() {\n    if (!called) {\n      called = true;\n      callback();\n    }\n  };\n\n  setTimeout(raceCallback, opt_timeout);\n  return raceCallback;\n};\n\nfunction OutboundLink(props) {\n  var eventCategory = props.eventCategory,\n      eventAction = props.eventAction,\n      eventLabel = props.eventLabel,\n      eventValue = props.eventValue,\n      rest = (0, _objectWithoutPropertiesLoose2.default)(props, [\"eventCategory\", \"eventAction\", \"eventLabel\", \"eventValue\"]);\n  return _react.default.createElement(\"a\", (0, _extends2.default)({}, rest, {\n    onClick: function onClick(e) {\n      if (typeof props.onClick === \"function\") {\n        props.onClick(e);\n      }\n\n      var redirect = true;\n\n      if (e.button !== 0 || e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || e.defaultPrevented) {\n        redirect = false;\n      }\n\n      if (props.target && props.target.toLowerCase() !== \"_self\") {\n        redirect = false;\n      }\n\n      if (window.ga) {\n        window.ga(\"send\", \"event\", {\n          eventCategory: eventCategory || \"Outbound Link\",\n          eventAction: eventAction || \"click\",\n          eventLabel: eventLabel || props.href,\n          eventValue: eventValue,\n          transport: redirect ? \"beacon\" : \"\",\n          hitCallback: function hitCallback() {\n            if (redirect) {\n              document.location = props.href;\n            }\n          }\n        });\n      } else {\n        if (redirect) {\n          document.location = props.href;\n        }\n      }\n\n      return false;\n    }\n  }));\n}\n\nOutboundLink.propTypes = {\n  href: _propTypes.default.string,\n  target: _propTypes.default.string,\n  eventCategory: _propTypes.default.string,\n  eventAction: _propTypes.default.string,\n  eventLabel: _propTypes.default.string,\n  eventValue: _propTypes.default.number,\n  onClick: _propTypes.default.func\n};\n/**\n * This allows the user to create custom events within their Gatsby projects.\n *\n * @param {import('gatsby-plugin-google-analytics').CustomEventArgs} args\n * @see https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#events\n */\n\nfunction trackCustomEvent(_ref) {\n  var category = _ref.category,\n      action = _ref.action,\n      label = _ref.label,\n      value = _ref.value,\n      _ref$nonInteraction = _ref.nonInteraction,\n      nonInteraction = _ref$nonInteraction === void 0 ? true : _ref$nonInteraction,\n      transport = _ref.transport,\n      hitCallback = _ref.hitCallback,\n      _ref$callbackTimeout = _ref.callbackTimeout,\n      callbackTimeout = _ref$callbackTimeout === void 0 ? 1000 : _ref$callbackTimeout;\n\n  if (typeof window !== \"undefined\" && window.ga) {\n    var trackingEventOptions = {\n      eventCategory: category,\n      eventAction: action,\n      eventLabel: label,\n      eventValue: value,\n      nonInteraction: nonInteraction,\n      transport: transport\n    };\n\n    if (hitCallback && typeof hitCallback === \"function\") {\n      trackingEventOptions.hitCallback = createFunctionWithTimeout(hitCallback, callbackTimeout);\n    }\n\n    window.ga(\"send\", \"event\", trackingEventOptions);\n  }\n}","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nfunction FilterListItem({ category, id, onToggleCategory}) {\n  return (\n    <li>\n      <label htmlFor={id} className=\"checkbox\">\n        {category.title}\n        <input\n          id={id}\n          checked={category.selected}\n          name={id}\n          type=\"checkbox\"\n          onChange={()=>onToggleCategory(category)}\n        ></input>\n        <span className=\"checkbox__indicator\"></span>\n      </label>\n    </li>\n  )\n}\n\nFilterListItem.propTypes = {\n  category: PropTypes.shape({\n    title: PropTypes.string,\n    selected: PropTypes.bool\n  }).isRequired,\n  id: PropTypes.number,\n  onToggleCategory: PropTypes.func\n}\n\nexport default FilterListItem\n","import React, { useState } from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport FilterListItem from \"./filterListItem\"\n\nfunction FilterList({\n  title,\n  categories,\n  onToggleCategory,\n  onChangeSearchText,\n}) {\n  const [searchText, setSearchText] = useState(\"\")\n\n  return (\n    <div className=\"filter accordion\">\n      <div className=\"filter__heading accordion__heading\">{title}</div>\n      <div\n        className=\"form__input\"\n        style={{\n          display: \"block\",\n        }}\n      >\n        <input\n          type=\"text\"\n          className={`input input--text input--white js-input input--cesg ${\n            searchText.length > 0 ? \"js-filled\" : \"\"\n          }`}\n          name=\"search\"\n          id=\"search\"\n          required=\"\"\n          maxLength=\"100\"\n          value={searchText}\n          onChange={e => {\n            onChangeSearchText(e.target.value)\n            setSearchText(e.target.value)\n          }}\n        />\n        <label htmlFor=\"search\" className=\"label \">\n          Search\n        </label>\n      </div>\n\n      <div className=\"filter__checkboxes list list--no-bullets accordion__list\">\n        <ul>\n          {categories.map((category, i) => (\n            <FilterListItem\n              category={category}\n              id={i}\n              key={i}\n              onToggleCategory={c => onToggleCategory(c)}\n            />\n          ))}\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nFilterList.propTypes = {\n  title: PropTypes.string.isRequired,\n  categories: PropTypes.arrayOf(\n    PropTypes.shape({\n      title: PropTypes.string,\n      selected: PropTypes.bool,\n    })\n  ),\n  onToggleCategory: PropTypes.func,\n  onChangeSearchText: PropTypes.func,\n}\n\nexport default FilterList\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { trackCustomEvent } from 'gatsby-plugin-google-analytics'\n\nfunction CustomElementCardListItem({ customElement }) {\n  return (\n    <div className=\"card card--lg-2\">\n      <a\n        href={customElement.readmeUrl}\n        className=\"card__link-outer\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        onClick={e=>{\n          trackCustomEvent({\n            category: \"CESG\",\n            action: \"Click Detail\",\n            label: customElement.title\n          })\n        }}\n      ></a>\n      <div className=\"card__content\">\n        <div className=\"card__heading  card__heading--small\">\n          <h3>{customElement.title}</h3>\n        </div>\n        <div\n          className=\"card__image card__image--no-bg\"\n          style={{\n            padding: \"24px 0\",\n            height: \"auto\",\n          }}\n        >\n          <img src={customElement.thumbnailUrl.publicURL} alt=\"Screenshot of element in action\" />\n        </div>\n        <div className=\"card__description\">\n          <p>{customElement.description}</p>\n        </div>\n        <div className=\"card__content-bottom\">\n          {customElement.categories &&\n            customElement.categories.map((c, i) => (\n              <span\n                key={i}\n                className=\"tag tag--orange\"\n                style={{\n                  margin: \"6px\",\n                }}\n              >\n                {c}\n              </span>\n            ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nCustomElementCardListItem.propTypes = {\n  customElement: PropTypes.object.isRequired,\n}\n\nexport default CustomElementCardListItem\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport CustomElementCardListItem from \"./customElementCardListItem\"\n\nfunction CustomElementCardList({ customElements }) {\n\n  return (\n    <div className=\"cards\">\n      {customElements.map(customElement => (\n        <CustomElementCardListItem key={customElement.id} customElement={customElement} />\n      ))}\n    </div>\n  )\n}\n\nCustomElementCardList.propTypes = {\n  customElements: PropTypes.arrayOf(PropTypes.object)\n}\n\nexport default CustomElementCardList\n","import React, { useState, useEffect } from \"react\"\nimport { useStaticQuery, graphql } from \"gatsby\"\nimport { trackCustomEvent } from 'gatsby-plugin-google-analytics'\n\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport FilterList from \"../components/filterList\"\nimport CustomElementCardList from \"../components/customElementCardList\"\nimport useDebounce from \"../helpers/useDebounce\"\n\nconst IndexPage = () => {\n  const data = useStaticQuery(\n    graphql`\n      query {\n        categories: allElementsJson {\n          distinct(field: categories)\n        }\n        elements: allElementsJson(sort: { fields: title }) {\n          edges {\n            node {\n              id\n              title\n              description\n              readmeUrl\n              thumbnailUrl {\n                publicURL\n              }\n              categories\n            }\n          }\n        }\n      }\n    `\n  )\n\n  const [searchText, setSearchText] = useState(\"\")\n\n  const initialCategories = getInitialCategories(data.categories.distinct)\n  const [categories, setCategories] = useState(initialCategories)\n\n  const toggleCategory = category => {\n    const index = categories.findIndex(\n      stateCategory => stateCategory.title === category.title\n    )\n    const newCategories = [...categories]\n    newCategories[index] = { ...category, selected: !category.selected }\n    setCategories(newCategories)\n  }\n\n  const allElements = data.elements.edges.map(e => e.node)\n  const [elements] = useState(allElements)\n  const [filteredElements, setFilteredElements] = useState(allElements)\n  const [activeFilter, setActiveFilter] = useState(\"\")\n\n  useEffect(() => {\n    const activeCategories = categories\n      .filter(c => c.selected)\n      .map(c => c.title)\n    const visibleElements = elements.filter(element => {\n      const matchesCategoryFilter = satisfiesCategoryFilters(\n        element,\n        activeCategories\n      )\n      const matchesSearchTextFilter = satisfiesSearchTextFilter(\n        element,\n        searchText\n      )\n\n      return matchesCategoryFilter && matchesSearchTextFilter\n    })\n\n    setFilteredElements(visibleElements)\n\n    const cleanedText = cleanText(searchText)\n    const categoriesFlattened = categories\n      .filter(c => c.selected)\n      .map(c => c.title)\n      .join(\", \")\n    if (cleanedText || categoriesFlattened) {\n      setActiveFilter(\n        `Text: ${cleanedText} | Categories: ${categoriesFlattened}`\n      )\n    } else {\n      setActiveFilter(null)\n    }\n  }, [elements, searchText, categories, activeFilter])\n\n  const debouncedActiveFilter = useDebounce(activeFilter, 1500)\n  useEffect(() => {\n    if (debouncedActiveFilter) {\n      trackCustomEvent({\n        category: \"CESG\",\n        action: \"Search\",\n        label: debouncedActiveFilter,\n      })\n    }\n  }, [debouncedActiveFilter])\n\n  return (\n    <Layout>\n      <SEO title=\"Home\" />\n      <section className=\"section grid\">\n        <div className=\"grid__row\">\n          <div className=\"grid__col grid__col--12\">\n            <div className=\"js-pagination-list\">\n              <div className=\"heading heading--h2 heading--center heading--indent-content\">\n                <h2>\n                  Custom element sample gallery\n                  <strong className=\"highlight\">.</strong>\n                </h2>\n              </div>\n              <div className=\"grid__row\">\n                <div className=\"grid__col grid__col--12 grid__col--md-3 grid__col--lg-span-2 grid__col--lg-2 js-integrations-filter-wrapper\">\n                  <div className=\"js-integrations-filter\">\n                    {activeFilter}\n                    <FilterList\n                      title=\"Category\"\n                      categories={categories}\n                      onToggleCategory={c => toggleCategory(c)}\n                      onChangeSearchText={t => setSearchText(t)}\n                    />\n                  </div>\n                </div>\n                <div className=\"grid__col grid__col--12 grid__col--md-9 grid__col--lg-7\">\n                  <CustomElementCardList customElements={filteredElements} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  )\n}\n\nfunction getInitialCategories(data) {\n  return data\n    .map(category => ({\n      title: category,\n      selected: false,\n    }))\n    .sort((a, b) => a.title.toLowerCase().localeCompare(b.title.toLowerCase()))\n}\n\nfunction satisfiesCategoryFilters(element, activeCategories) {\n  if (activeCategories.length < 1) {\n    return true\n  } else if (!element.categories) {\n    return false\n  }\n  return element.categories.some(c => activeCategories.includes(c))\n}\n\nfunction satisfiesSearchTextFilter(element, searchText) {\n  const minLength = 3\n\n  if (searchText && searchText.length >= minLength) {\n    const titleHasMatch = textHasMatch(element.title, searchText)\n    const descriptionHasMatch = textHasMatch(element.description, searchText)\n    const categories = element.categories.join(\" \")\n    const categoriesHasMatch = textHasMatch(categories, searchText)\n    return titleHasMatch || descriptionHasMatch || categoriesHasMatch\n  }\n  return true\n}\n\nfunction cleanText(text) {\n  const ignoredCharsRegex = /[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/g\n  return text.toLowerCase().replace(ignoredCharsRegex, \"\")\n}\n\nfunction textHasMatch(text, searchText) {\n  const searchTextCleanStartsWith = cleanText(searchText)\n  const searchTextCleanIncludes = ` ${searchTextCleanStartsWith}`\n\n  const textCleaned = cleanText(text)\n  return (\n    textCleaned.startsWith(searchTextCleanStartsWith) ||\n    textCleaned.includes(searchTextCleanIncludes)\n  )\n}\n\nexport default IndexPage\n","import { useState, useEffect } from 'react';\n\nexport default function useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value]\n  );\n\n  return debouncedValue;\n}\n\n"],"sourceRoot":""}